import{_ as z,n as A,p as $,r as S,q as N,s as I,c as L,o as V,b as m,a as o,w as r,t as d,v as p,d as c,x as B,y as M}from"./index-CHogzKo6.js";const T={class:"page_wrapper"},D={class:"flex pb-5"},E={class:"chart_box"},F={__name:"preview_10",setup(O){console.log("src/views/preview/tabs/preview_10.vue");const y=A("echarts"),u=$(null);var _=null;const e=S({active:2,dayArr:[1,5,10,20,40,60,120,244],list:[]}),g=a=>{let t=`${a.code}-${a.name}`;return t.length>15?t.substring(0,15)+"...":t},b=a=>{M({fundcode:a,pageSize:e.dayArr[e.dayArr.length-1]}).then(t=>{console.log("res",t);for(let s=0;s<e.list.length;s++)if(e.list[s].code===a){e.list[s].his_data=t.data||[],x();break}})},x=()=>{const a=e.dayArr[e.active],s=Math.max(0,1-Math.min(a,50)/a)*100;console.log("zoomStart",s);const n=new Array(a+1).fill(1).map((l,v)=>v),k={legend:{type:"scroll",orient:"vertical",icon:"circle",right:10,y:"center",data:e.list.map(l=>g(l))},dataZoom:[{type:"inside",xAxisIndex:[0,1],start:s,end:100,zoomLock:!0,filterMode:"filter"},{show:!0,xAxisIndex:[0,1],type:"slider",bottom:0,start:s,end:100,zoomLock:!0,brushSelect:!1}],grid:{top:20,left:10,right:210,bottom:40,containLabel:!0},xAxis:{type:"category",axisTick:{show:!1},boundaryGap:!1,data:n},yAxis:{type:"value",splitLine:{lineStyle:{type:"dashed"}}},series:e.list.map(l=>{let v=[0],h=0;for(;l.his_data.length<a;)l.his_data.unshift({date:"",netValue:"",dailyProfit:"0",totalNetValue:""});let C=l.his_data.length-a;for(let f=C;f<l.his_data.length;f++)h+=Number(l.his_data[f].dailyProfit)*100,v.push(h);return{name:g(l),data:v,type:"line",symbolSize:2}})};_.setOption(k)},i=(a,t)=>{e.active=t,console.log("num",a,t)},w=()=>{setTimeout(()=>{e.list=[{code:"018561",name:"中信保诚多策略混合(LOF)C",short_name:"",zhang_url:"服务器监听",point_line_top:null,point_line_down:null,desc:"",fixed:100,type:"量化",his_data:[]},{code:"020726",name:"建信灵活配置混合C",short_name:"",zhang_url:"服务器监听",point_line_top:null,point_line_down:null,desc:"",fixed:100,type:"量化",his_data:[]}];for(let a=0;a<e.list.length;a++)setTimeout(()=>{b(e.list[a].code)},a*100)},300)};return N(()=>{u.value&&y&&(_=y.init(u.value),x()),w()}),I(()=>{u.value&&y&&_&&_.dispose()}),(a,t)=>{const s=B;return V(),L("div",T,[m("div",D,[o(s,{type:"primary",class:p({active:c(e).active===1}),onClick:t[0]||(t[0]=n=>i(5,1))},{default:r(()=>t[7]||(t[7]=[d("近一周",-1)])),_:1,__:[7]},8,["class"]),o(s,{type:"primary",class:p({active:c(e).active===2}),onClick:t[1]||(t[1]=n=>i(10,2))},{default:r(()=>t[8]||(t[8]=[d("近两周",-1)])),_:1,__:[8]},8,["class"]),o(s,{type:"primary",class:p({active:c(e).active===3}),onClick:t[2]||(t[2]=n=>i(20,3))},{default:r(()=>t[9]||(t[9]=[d("近一个月",-1)])),_:1,__:[9]},8,["class"]),o(s,{type:"primary",class:p({active:c(e).active===4}),onClick:t[3]||(t[3]=n=>i(40,4))},{default:r(()=>t[10]||(t[10]=[d("近两个月",-1)])),_:1,__:[10]},8,["class"]),o(s,{type:"primary",class:p({active:c(e).active===5}),onClick:t[4]||(t[4]=n=>i(60,5))},{default:r(()=>t[11]||(t[11]=[d("近三个月",-1)])),_:1,__:[11]},8,["class"]),o(s,{type:"primary",class:p({active:c(e).active===6}),onClick:t[5]||(t[5]=n=>i(120,6))},{default:r(()=>t[12]||(t[12]=[d("近半年",-1)])),_:1,__:[12]},8,["class"]),o(s,{type:"primary",class:p({active:c(e).active===7}),onClick:t[6]||(t[6]=n=>i(244,7))},{default:r(()=>t[13]||(t[13]=[d("近一年",-1)])),_:1,__:[13]},8,["class"])]),m("div",E,[m("div",{ref_key:"chart",ref:u,class:"chart_el",style:{width:"100%",height:"100%"}},null,512)])])}}},U=z(F,[["__scopeId","data-v-0840f5c5"]]);export{U as default};
