import{_ as L,p as W,r as $,c as q,o as M,b as V,a as o,w as s,t as n,x as N,A as T,d as t,B as z,C as I,D as O,G as A,H as S,I as j,J as G,K as H,L as J,M as K,E as m,N as P,O as R,P as Q}from"./index-CHogzKo6.js";/* empty css                       */const X={class:"page-wrapper"},Y={class:"flex pb-5"},Z={class:"dialog-footer"},ee={__name:"preview_09",setup(le){console.log("src/views/preview/tabs/preview_09.vue");const _=W(null),l=$({tableData:[],formLabelWidth:"140px",update_flag:"add",dialogFormVisible:!1,form:{email:"test@qq.com",name:"1231",update_time:"",password:"1231312",fund:[],active:"",desc:"ceshi"}}),v={email:[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{type:"email",message:"请输入有效的邮箱地址",trigger:["blur","change"]}],name:[{required:!0,message:"请输入备注",trigger:"blur"},{min:1,message:"至少输入1位",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:4,message:"密码长度至少为4位",trigger:"blur"}]},f=()=>{H({}).then(r=>{l.tableData=r.data})};f();const y=({row:r,rowIndex:e})=>e%2===1?"warning-row":"success-row",k=(r,e)=>{l.form=Object.assign({},l.form,r),l.update_flag="edit",l.dialogFormVisible=!0},F=(r,e)=>{console.log("停用")},h=(r,e)=>{console.log("删除",r.email),J.confirm("确认删除吗?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{K({email:r.email}).then(i=>{console.log("res",i),i.code===200?(m.success("删除成功"),f()):m.error("删除失败，请重试！")})}).catch(()=>{})},x=()=>{console.log("新增"),l.update_flag="add",l.dialogFormVisible=!0},g=()=>{_.value.resetFields()},C=()=>{_.value.validate(r=>{if(r)console.log("form",l.form),l.form.update_time=P(new Date,"yyyy-MM-dd hh:mm:ss"),l.update_flag==="add"?R({form:l.form}).then(e=>{console.log("新增",e),e.code===200?(m.success("新增成功"),l.dialogFormVisible=!1,g(),f()):m.error("新增失败！")}):Q({form:l.form}).then(e=>{console.log("更新",e),e.code===200?(m.success("更新成功"),l.dialogFormVisible=!1,g(),f()):m.error("更新失败！")});else return console.log("error submit!!"),!1})};return(r,e)=>{const i=N,d=T,E=z,p=A,u=O,c=j,B=S,U=I,D=G;return M(),q("div",X,[V("div",Y,[o(i,{type:"primary",size:"small",onClick:e[0]||(e[0]=a=>x())},{default:s(()=>e[8]||(e[8]=[n("新增用户",-1)])),_:1,__:[8]})]),o(E,{data:t(l).tableData,border:"","row-class-name":y,style:{width:"100%"},height:"500"},{default:s(()=>[o(d,{fixed:"",label:"序",type:"index",width:"50"}),o(d,{prop:"email",label:"邮箱",width:"300"}),o(d,{prop:"name",label:"名称",width:"150"}),o(d,{prop:"password",label:"密码",width:"200"}),o(d,{prop:"desc",label:"备注",width:"200"}),o(d,{label:"Operations","min-width":"120"},{default:s(({row:a,$index:b})=>[o(i,{link:"",type:"primary",size:"small",onClick:w=>k(a,b)},{default:s(()=>e[9]||(e[9]=[n("编辑",-1)])),_:2,__:[9]},1032,["onClick"]),o(i,{link:"",type:"primary",size:"small",onClick:w=>F(a,b)},{default:s(()=>e[10]||(e[10]=[n("停用",-1)])),_:2,__:[10]},1032,["onClick"]),o(i,{link:"",type:"primary",size:"small",onClick:w=>h(a,b)},{default:s(()=>e[11]||(e[11]=[n("删除",-1)])),_:2,__:[11]},1032,["onClick"])]),_:1})]),_:1},8,["data"]),o(D,{modelValue:t(l).dialogFormVisible,"onUpdate:modelValue":e[7]||(e[7]=a=>t(l).dialogFormVisible=a),title:t(l).update_flag,width:"500"},{footer:s(()=>[V("div",Z,[o(i,{onClick:e[6]||(e[6]=a=>t(l).dialogFormVisible=!1)},{default:s(()=>e[12]||(e[12]=[n("取消",-1)])),_:1,__:[12]}),o(i,{type:"primary",onClick:C},{default:s(()=>e[13]||(e[13]=[n("确定",-1)])),_:1,__:[13]})])]),default:s(()=>[o(U,{model:t(l).form,rules:v,ref_key:"diaForm",ref:_},{default:s(()=>[o(u,{label:"邮箱",prop:"email","label-width":t(l).formLabelWidth},{default:s(()=>[o(p,{modelValue:t(l).form.email,"onUpdate:modelValue":e[1]||(e[1]=a=>t(l).form.email=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),o(u,{label:"名称",prop:"name","label-width":t(l).formLabelWidth},{default:s(()=>[o(p,{modelValue:t(l).form.name,"onUpdate:modelValue":e[2]||(e[2]=a=>t(l).form.name=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),o(u,{label:"密码",prop:"password","label-width":t(l).formLabelWidth},{default:s(()=>[o(p,{modelValue:t(l).form.password,"onUpdate:modelValue":e[3]||(e[3]=a=>t(l).form.password=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),o(u,{label:"激活状态","label-width":t(l).formLabelWidth},{default:s(()=>[o(B,{modelValue:t(l).form.active,"onUpdate:modelValue":e[4]||(e[4]=a=>t(l).form.active=a),placeholder:"请选择状态"},{default:s(()=>[o(c,{label:"在用",value:""}),o(c,{label:"停用",value:"停用"})]),_:1},8,["modelValue"])]),_:1},8,["label-width"]),o(u,{label:"备注","label-width":t(l).formLabelWidth},{default:s(()=>[o(p,{modelValue:t(l).form.desc,"onUpdate:modelValue":e[5]||(e[5]=a=>t(l).form.desc=a),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}},ae=L(ee,[["__scopeId","data-v-b1373ebf"]]);export{ae as default};
